<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <title>HO2 - parallaxSlider - demo</title>
    <style type="text/css">
    html,body{margin: 0; padding: 0;  width: 100%; height: 100%; overflow: hidden;}
    /*.wrapper{position: relative; width: 100%; height: 100%; overflow: hidden;}*/
    .page{position: relative; font-size: 64px;}
    .page:nth-child(1){background-color: #999; color: #fff;}
    .page:nth-child(2){background-color: blue; color: #fff;}
    .page:nth-child(3){background-color: yellow; color: #000;}
    .page:nth-child(4){background-color: green; color: #fff;}
    .page:nth-child(5){background-color: purple; color: #fff;}
    .page:nth-child(6){background-color: pink; color: #fff;}
    .banner{position: relative; width: 100%; height: auto; z-index: 0;}
    img{display: block; vertical-align: top;}
    .bd{position: relative; width: 100%; height: 100%; background-color: inherit; z-index: 1;}
    </style>
</head>
<body ontouchstart>
<div class="wrapper" id="wrap">
    <div class="page">
        <div class="banner" halo-slider-speed=".5">
            <img src="http://jdc.jd.com/halo/demo/images/1.jpg" width="100%" border="0">
        </div>
        <div class="bd">
            1
        </div>
    </div>
    <div class="page">
        <div class="banner" halo-slider-speed=".5">
            <img src="http://jdc.jd.com/halo/demo/images/1.jpg" width="100%" border="0">
        </div>
        <div class="bd">
            2
        </div>
    </div>
    <div class="page">
        <div class="banner" halo-slider-speed=".5">
            <img src="http://jdc.jd.com/halo/demo/images/1.jpg" width="100%" border="0">
        </div>
        <div class="bd">
            <a href="javascript:parallaxslider.move(5)">跳转到6</a>
        </div>
    </div>
    <div class="page">
        <div class="banner" halo-slider-speed=".5">
            <img src="http://jdc.jd.com/halo/demo/images/1.jpg" width="100%" border="0">
        </div>
        <div class="bd">
            4
        </div>
    </div>
    <div class="page">
        <div class="banner" halo-slider-speed=".5">
            <img src="http://jdc.jd.com/halo/demo/images/1.jpg" width="100%" border="0">
        </div>
        <div class="bd">
            5
        </div>
    </div>
    <div class="page">
        <div class="banner" halo-slider-speed=".5">
            <img src="http://jdc.jd.com/halo/demo/images/1.jpg" width="100%" border="0">
        </div>
        <div class="bd">
            6
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="http://wq.360buyimg.com/js/ho2/zepto.js"></script>
<script type="text/javascript">
~function(){window.define||(haloRequire=function(a){return window[a]},haloDelWM=function(a){haloR[a],haloWM.hasOwnProperty(a)&&(delete haloWM[a],--haloWM.length<=0&&haloRegister())},haloRegister=function(){for(var a in haloUnR)window[a]=haloUnR[a].module(haloRequire,haloUnR[a]._module.exports,haloUnR[a]._module),delete haloUnR[a]},haloMChk=function(a,b,c){var g,h,d=[],e=a.toString(),f=new RegExp("[^\\.]s*require\\((.+?)\\)","mg");if(e.replace(f,function(a,b){d.push(b.replace(/\"|\'/g,""))}),d.length)for(haloUnR[b]={module:a,_module:c},g=0,h=d.length;h>g;++g)haloR.hasOwnProperty(d[g])||(haloWM[d[g]]=1,++haloWM.length);else window[b]=a(haloRequire,c.exports,c),window[b]||(window[b]=c.exports),haloDelWM(b)},haloUnR={},haloR={},haloWM={length:0},define=function(a,b){if("[object String]"==Object.prototype.toString.call(a)&&!window[a]){var c={exports:{}};"[object Function]"==Object.prototype.toString.call(b)?haloMChk(b,a,c):(window[a]=b,haloDelWM(a))}})}();define("prefix",function(){var d=function(){var a=document.createElement("div");return a.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;",a.style.webkitTransition?"-webkit-":a.style.MozTransition?"-moz-":a.style.oTransition?"-o-":a.style.msTransition?"-ms-":""}();return window.$&&($.prefix=d),d});define("isDom",function(){var d="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName};return window.$&&($.isDom=d),d});define("stylesheet",function(require,b,c){var h,i,j,d=document.createElement("style"),e=document.getElementsByTagName("head")[0],f=[],g=0;e.appendChild(d),h=function(a){return f.push(a),d.innerHTML=f.join("\r\n"),g=f.length,g-1},i=function(a){if("number"==typeof a)g>=a&&(f[a]="");else if("string"==typeof a)for(var b=0;g>b;++b)if(f[b]==a){f[b]="";break}d.innerHTML=f.join("\r\n")},j=function(a){var b=Object.prototype.toString.call(a);if("[object String]"==b&&(a={css:a,type:arguments[1]},b="[object Object]"),"[object Object]"==b&&a.css)return"delete"==a.type?"delete":"add","delete"==a.type?i(a.css):h(a.css),void 0;throw"stylesheet: arguments parseerror!"},window.$&&($.stylesheet=j),c.exports={add:h,remove:i}});define("parallaxSlider",function(a,b,c){var d=a("prefix"),e=a("isDom"),f=a("stylesheet"),g=function(a){var b,c,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,e="",g="",j=document.documentElement.clientHeight;if("string"==typeof a.container){if(b=document.querySelector(a.container),!b)throw"Container unexist!"}else{if(!a.container.nodeType||1!=a.container.nodeType)throw"Container unexist!";b=a.container}if(a.onchange="function"==typeof a.onchange?a.onchange:function(){},a.duration=a.duration||300,a.duration2=a.duration2||100,a.direction=a.direction||"Y",c="Y"==a.direction,c?(e="translate3d(0,",g=",0)"):(e="translate3d(",g=",0,0)"),i=c?"pageY":"pageX",j=c?document.documentElement.clientHeight:document.documentElement.clientWidth,k=function(){var d,e,a=b.childNodes,c=[];for(d=0,e=a.length;e>d;++d)1==b.childNodes[d].nodeType&&c.push(b.childNodes[d]);return c}(),k.length){for(l=k.length,m=[],n=0;l>n;++n)o=k[n].querySelector("[halo-slider-speed]"),m[n]=o?[o,parseFloat(o.getAttribute("halo-slider-speed"))||1]:void 0;for(a.cover=a.cover||0,a.cover>=l?a.cover=l-1:a.cover<0&&(a.cover=0),p=a.cover,q=p+1,r=p-1,a.infinite&&(0>r&&(r=l-1),q>l-1&&(q=0)),f.add("[HALOSLIDER] > *{"+d+"transform:translateZ(0);}"),b.style.cssText+="width:100%; height:100%; overflow:hidden;",b.parentNode.style.overflow="hidden",window.addEventListener("resize",function(){j=c?document.documentElement.clientHeight:document.documentElement.clientWidth}),u=function(a,b){t=a,s=setTimeout(function(){a(),t=a=null},b)},v=function(){clearTimeout(s),"function"==typeof t&&t()},w=!1,x=!1,y=function(a){var b=a.targetTouches||a.changedTouches,c=b[0];J=c.pageX,K=c.pageY,h=c[i],v()},z=function(a){var b=a.targetTouches||a.changedTouches,c=b[0],f=c[i],l=f-h;k[r].style[d+"transform"]=e+(l-j)+"px"+g,k[p].style[d+"transform"]=e+l+"px"+g,k[q].style[d+"transform"]=e+(l+j)+"px"+g,B(p,l)},A=function(a){var b=a.targetTouches||a.changedTouches,c=b[0],f=c[i],m=f-h;l-1>p&&p>0?(k[r].style[d+"transform"]=e+(m-j)+"px"+g,k[p].style[d+"transform"]=e+m+"px"+g,k[q].style[d+"transform"]=e+(m+j)+"px"+g,B(p,m),w=x=!1):m>0?0==p?(k[p].style[d+"transform"]=e+m/3+"px"+g,k[q].style[d+"transform"]=e+j+"px"+g,B(p,m),w=!0):(k[r].style[d+"transform"]=e+(m-j)+"px"+g,k[p].style[d+"transform"]=e+m+"px"+g,x=!1):0>m&&(p==l-1?(k[p].style[d+"transform"]=e+m/3+"px"+g,k[r].style[d+"transform"]=e+-1*j+"px"+g,B(p,m/3),x=!0):(k[p].style[d+"transform"]=e+m+"px"+g,k[q].style[d+"transform"]=e+(m+j)+"px"+g,B(p,m),w=!1))},B=function(a,b){if(m[a]&&b){var c=m[a][0],e=m[a][1];c.style[d+"transform"]=b>=0?"translate3d(0,0,0)":"translate3d(0,"+b*(e-1)+"px,0)"}},C=function(b){var s,t,v,w,c=b.changedTouches||b.targetTouches,f=c[0],n=f[i],o=n-h;o>0&&o>=a.offset?(s=d+"transform "+a.duration/1e3+"s linear",k[p].style[d+"transition"]=s,k[r].style[d+"transition"]=s,k[r].style[d+"transform"]=e+0+"px"+g,k[p].style[d+"transform"]=e+j+"px"+g,l-1>=q&&(k[q].style[d+"transform"]=e+j+"px"+g),t=p,v=r,w=q,u(function(){k[t].style[d+"transition"]=k[v].style[d+"transition"]="",a.onchange.call(k,t,v)},a.duration),F(-1)):0>o&&-1*o>=a.offset?(s=d+"transform "+a.duration/1e3+"s linear",k[p].style[d+"transition"]=s,k[p].style[d+"transform"]=e+-1*j+"px"+g,k[q].style[d+"transition"]=s,k[q].style[d+"transform"]=e+0+"px"+g,r>=0&&(k[r].style[d+"transform"]=e+-1*j+"px"+g),t=p,v=r,w=q,u(function(){k[t].style[d+"transition"]=k[w].style[d+"transition"]="",m[t]&&(m[t][0].style[d+"transform"]=e+"0px"+g),a.onchange.call(k,t,w)},a.duration),F(1)):0!=o&&(s=d+"transform "+a.duration2/1e3+"s linear",r>=0&&(k[r].style[d+"transition"]=s,k[r].style[d+"transform"]=e+-1*j+"px"+g),k[p].style[d+"transition"]=s,k[p].style[d+"transform"]=e+0+"px"+g,l-1>=q&&(k[q].style[d+"transition"]=s,k[q].style[d+"transform"]=e+j+"px"+g),m[p]&&(m[p][0].style[d+"transition"]=s,m[p][0].style[d+"transform"]=e+"0px"+g),t=p,v=r,w=q,u(function(){D||(k[t].style[d+"transition"]=""),r>=0&&(k[v].style[d+"transition"]=""),l-1>=q&&(k[w].style[d+"transition"]=""),m[p]&&(m[p][0].style[d+"transition"]="")},a.duration2))},D=!1,E=function(b){if(w||x){var c=d+"transform "+a.duration2/1e3+"s linear";k[p].style[d+"transition"]=c,k[p].style[d+"transform"]=e+0+"px"+g,m[p]&&(m[p][0].style[d+"transition"]=c,m[p][0].style[d+"transform"]=e+"0px"+g),u(function(){w=x=!1,k[p].style[d+"transition"]="",m[p]&&(m[p][0].style[d+"transition"]="")},a.duration2)}else C(b)},F=function(b){p+=b,r=p-1,q=p+1,a.infinite&&(p>=l?(p=0,r=l-1,q=1):p==l-1?q=0:0>p?(p=l-1,r=p-1,q=0):0==p&&(r=l-1))},G=function(){for(var b=0,c=k.length;c>b;++b)k[b].addEventListener("touchstart",y),a.infinite?(k[b].addEventListener("touchmove",z),k[b].addEventListener("touchend",C),k[b].addEventListener("touchcancel",C)):(k[b].addEventListener("touchmove",A),k[b].addEventListener("touchend",E),k[b].addEventListener("touchcancel",E))},H=function(){for(var b=0,c=k.length;c>b;++b)k[b].removeListener("touchstart",y),a.infinite?(k[b].removeListener("touchmove",z),k[b].removeListener("touchend",C),k[b].removeListener("touchcancel",C)):(k[b].removeListener("touchmove",A),k[b].removeListener("touchend",E),k[b].removeListener("touchcancel",E))},n=0,I=k.length;I>n;++n)k[n].style.cssText="position:absolute; left:0; top:0; width:100%; height:100%; overflow:hidden; "+(a.cover==n?"":d+"transform:"+e+j+"px"+g);return G(),J=0,K=0,L={},L.lock=function(){H()},L.unlock=function(){G()},L.move=function(b){var c,f,h,i;b=parseInt(b)||0,(b>=0||l-1>=b)&&(c=d+"transform "+a.duration/1e3+"s linear",f=b>p?-1:1,a.infinite&&(f=k[b].style[d+"transform"].indexOf("-")>=0?1:-1),k[p].style[d+"transition"]=c,k[p].style[d+"transform"]=e+f*j+"px"+g,k[b].style[d+"transition"]=c,k[b].style[d+"transform"]=e+0+"px"+g,D=!0,h=p,i=b,u(function(){D=!1,k[h].style[d+"transition"]=k[i].style[d+"transition"]="",a.onchange.call(k,h,i)},a.duration),a.infinite?(p=b,r=p-1,q=p+1,0>r&&(r=l-1),q>l-1&&(q=0)):(p=b,r=p-1,q=p+1))},L}};c.exports=function(a){if(e(this))a.container=this,g(a);else if("[object Array]"==Object.prototype.toString.call(this))for(var b=0,c=this.length;c>b;++c)a.container=this[b],e(this[b])&&g(a);else g(a)},window.$&&($.parallaxSlider=c.exports)});

$.parallaxSlider(
    {
        container: "#wrap",
        direction:'Y',
        offset:50,
        first:0,
        duration:300,
        infinite:false,
        onchange:function(o,i){
            console.log(o,i);
        }
    }
);
</script>
</html>