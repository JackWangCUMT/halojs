<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <title>HO2 - cardSlider - demo</title>
    <style type="text/css">
    html,body{margin: 0; padding: 0;  width: 100%; height: 100%; overflow: hidden;}
    .wrapper{position: relative; width: 100%; height: 100%; overflow: hidden;}
    .page{position: relative; font-size: 64px;}
    .page:nth-child(1){background-color: #999; color: #fff;}
    .page:nth-child(2){background-color: blue; color: #fff;}
    .page:nth-child(3){background-color: yellow; color: #000;}
    .page:nth-child(4){background-color: green; color: #fff;}
    .page:nth-child(5){background-color: purple; color: #fff;}
    .page:nth-child(6){background-color: pink; color: #fff;}
    </style>
</head>
<body ontouchstart>
<div class="wrapper" id="wrap">
    <div class="page">1</div>
    <div class="page">2</div>
    <div class="page">
        <a href="javascript:cardSlider.move(5)">跳转到6</a>
    </div>
    <div class="page">4</div>
    <div class="page">5</div>
    <div class="page">6</div>
</div>
</body>
<script type="text/javascript" src="http://wq.360buyimg.com/js/ho2/zepto.js"></script>

<script type="text/javascript">
~function(){window.define||(haloRequire=function(a){return window[a]},haloDelWM=function(a){haloR[a],haloWM.hasOwnProperty(a)&&(delete haloWM[a],--haloWM.length<=0&&haloRegister())},haloRegister=function(){for(var a in haloUnR)window[a]=haloUnR[a].module(haloRequire,haloUnR[a]._module.exports,haloUnR[a]._module),delete haloUnR[a]},haloMChk=function(a,b,c){var g,h,d=[],e=a.toString(),f=new RegExp("[^\\.]s*require\\((.+?)\\)","mg");if(e.replace(f,function(a,b){d.push(b.replace(/\"|\'/g,""))}),d.length)for(haloUnR[b]={module:a,_module:c},g=0,h=d.length;h>g;++g)haloR.hasOwnProperty(d[g])||(haloWM[d[g]]=1,++haloWM.length);else window[b]=a(haloRequire,c.exports,c),window[b]||(window[b]=c.exports),haloDelWM(b)},haloUnR={},haloR={},haloWM={length:0},define=function(a,b){if("[object String]"==Object.prototype.toString.call(a)&&!window[a]){var c={exports:{}};"[object Function]"==Object.prototype.toString.call(b)?haloMChk(b,a,c):(window[a]=b,haloDelWM(a))}})}();define("prefix",function(){var d=function(){var a=document.createElement("div");return a.style.cssText="-webkit-transition:all .1s; -moz-transition:all .1s; -o-transition:all .1s; -ms-transition:all .1s; transition:all .1s;",a.style.webkitTransition?"-webkit-":a.style.MozTransition?"-moz-":a.style.oTransition?"-o-":a.style.msTransition?"-ms-":""}();return window.$&&($.prefix=d),d});define("isDom",function(){var d="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName};return window.$&&($.isDom=d),d});define("cardSlider",function(a,b,c){var d=a("prefix"),e=a("isDom"),f=function(a){var b,c,g,h,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,e="",f="",i=document.documentElement.clientHeight;if("string"==typeof a.container){if(b=document.querySelector(a.container))throw"Container unexist!"}else{if(!a.container.nodeType||1!=a.container.nodeType)throw"Container unexist!";b=a.container}if(a.onchange="function"==typeof a.onchange?a.onchange:function(){},a.duration=a.duration||300,a.duration2=a.duration2||100,a.direction=a.direction||"Y",j=!!a.scale,c="Y"==a.direction,c?(e="translate3d(0,",f=",0)"):(e="translate3d(",f=",0,0)"),h=c?"pageY":"pageX",k=c?"center top":"left center",l=c?"center bottom":"right center",i=c?document.documentElement.clientHeight:document.documentElement.clientWidth,m=function(){var d,e,a=b.childNodes,c=[];for(d=0,e=a.length;e>d;++d)1==b.childNodes[d].nodeType&&c.push(b.childNodes[d]);return c}(),m.length){for(n=m.length,a.cover=a.cover||0,a.cover>=n?a.cover=n-1:a.cover<0&&(a.cover=0),o=a.cover,p=o+1,q=o-1,a.infinite&&(0>q&&(q=n-1),p>n-1&&(p=0)),b.parentNode.style.overflow="hidden",window.addEventListener("resize",function(){i=c?document.documentElement.clientHeight:document.documentElement.clientWidth}),t=function(a,b){s=a,r=setTimeout(function(){a(),s=a=null},b)},u=function(){clearTimeout(r),"function"==typeof s&&s()},v=!1,w=!1,x=function(a){var b=a.targetTouches||a.changedTouches,c=b[0];J=c.pageX,K=c.pageY,g=c[h],u()},y=function(a){var b=a.targetTouches||a.changedTouches,c=b[0],j=c[h],k=j-g;m[q].style[d+"transform"]=e+(k-i)+"px"+f,m[p].style[d+"transform"]=e+(k+i)+"px"+f,A(k)},z=function(a){var b=a.targetTouches||a.changedTouches,c=b[0],j=c[h],k=j-g;n-1>o&&o>0?(m[q].style[d+"transform"]=e+(k-i)+"px"+f,m[p].style[d+"transform"]=e+(k+i)+"px"+f,A(k),v=w=!1):k>0?0==o?(m[o].style[d+"transform"]=e+k/3+"px"+f,m[p].style[d+"transform"]=e+i+"px"+f,v=!0):(m[q].style[d+"transform"]=e+(k-i)+"px"+f,A(k),w=!1):0>k&&(o==n-1?(m[o].style[d+"transform"]=e+k/3+"px"+f,m[q].style[d+"transform"]=e+-1*i+"px"+f,w=!0):(m[p].style[d+"transform"]=e+(k+i)+"px"+f,A(k),v=!1))},A=function(a){j&&(a>0?(m[o].style[d+"transform-origin"]=l,m[o].style[d+"transform"]="scale("+(1-.2*Math.abs(a/i))+") translateZ(0)"):0>a?(m[o].style[d+"transform-origin"]=k,m[o].style[d+"transform"]="scale("+(1-.2*Math.abs(a/i))+") translateZ(0)"):(m[o].style[d+"transform-origin"]="",m[o].style[d+"transform"]=""))},B=function(b){var s,u,v,w,c=b.changedTouches||b.targetTouches,k=c[0],l=k[h],r=l-g;r>0&&r>=a.offset?(s=d+"transform "+a.duration/1e3+"s linear",m[q].style[d+"transition"]=s,m[q].style[d+"transform"]=e+0+"px"+f,j&&(m[o].style[d+"transition"]=s,m[o].style[d+"transform"]="scale(.8,.8) translateZ(0)"),n-1>=p&&(m[p].style[d+"transform"]=e+i+"px"+f),u=o,v=q,w=p,t(function(){m[u].style[d+"transition"]="",m[u].style[d+"transform"]=e+i+"px"+f,m[u].style.zIndex="1",m[v].style[d+"transition"]="",m[v].style.zIndex="0",a.onchange.call(m,u,v)},a.duration),E(-1)):0>r&&-1*r>=a.offset?(s=d+"transform "+a.duration/1e3+"s linear",j&&(m[o].style[d+"transition"]=s,m[o].style[d+"transform"]="scale(.8,.8) translateZ(0)"),m[p].style[d+"transition"]=s,m[p].style[d+"transform"]=e+0+"px"+f,q>=0&&(m[q].style[d+"transform"]=e+-1*i+"px"+f),u=o,v=q,w=p,t(function(){m[u].style[d+"transition"]="",m[u].style[d+"transform"]=e+-1*i+"px"+f,m[u].style.zIndex="1",m[w].style[d+"transition"]="",m[w].style.zIndex="0",a.onchange.call(m,u,w)},a.duration),E(1)):0!=r&&(s=d+"transform "+a.duration2/1e3+"s linear",q>=0&&(m[q].style[d+"transition"]=s,m[q].style[d+"transform"]=e+-1*i+"px"+f),j&&(m[o].style[d+"transition"]=s,m[o].style[d+"transform"]="scale(1,1) translateZ(0)"),n-1>=p&&(m[p].style[d+"transition"]=s,m[p].style[d+"transform"]=e+i+"px"+f),u=o,v=q,w=p,t(function(){C||(m[u].style[d+"transition"]=""),q>=0&&(m[v].style[d+"transition"]=""),n-1>=p&&(m[w].style[d+"transition"]="")},a.duration2))},C=!1,D=function(b){v||w?(m[o].style[d+"transition"]=d+"transform "+a.duration2/1e3+"s linear",m[o].style[d+"transform"]=e+0+"px"+f,t(function(){v=w=!1,m[o].style[d+"transition"]=""},a.duration2)):B(b)},E=function(b){o+=b,q=o-1,p=o+1,a.infinite&&(o>=n?(o=0,q=n-1,p=1):o==n-1?p=0:0>o?(o=n-1,q=o-1,p=0):0==o&&(q=n-1))},F=function(){for(var b=0,c=m.length;c>b;++b)m[b].addEventListener("touchstart",x),a.infinite?(m[b].addEventListener("touchmove",y),m[b].addEventListener("touchend",B),m[b].addEventListener("touchcancel",B)):(m[b].addEventListener("touchmove",z),m[b].addEventListener("touchend",D),m[b].addEventListener("touchcancel",D))},G=function(){for(var b=0,c=m.length;c>b;++b)m[b].removeEventListener("touchstart",x),a.infinite?(m[b].removeEventListener("touchmove",y),m[b].removeEventListener("touchend",B),m[b].removeEventListener("touchcancel",B)):(m[b].removeEventListener("touchmove",z),m[b].removeEventListener("touchend",D),m[b].removeEventListener("touchcancel",D))},H=0,I=m.length;I>H;++H)m[H].style.cssText="position:absolute; left:0; top:0; width:100%; height:100%; "+(a.cover==H?" z-index:0;":d+"transform:"+e+i+"px"+f+"; z-index:1;");return F(),J=0,K=0,L={},L.lock=function(){G()},L.unlock=function(){F()},L.move=function(b){var c,g,h,r;b=parseInt(b)||0,b!=o&&(b>=0||n-1>=b)&&(c=d+"transform "+a.duration/1e3+"s linear",g=b>o?-1:1,a.infinite&&(g=m[b].style[d+"transform"].indexOf("-")>=0?1:-1),console.log(g),j&&(m[o].style[d+"transform-origin"]=-1==g?k:l,m[o].style[d+"transition"]=c,m[o].style[d+"transform"]="scale(.8,.8) translateZ(0)"),m[b].style[d+"transition"]=c,m[b].style[d+"transform"]=e+0+"px"+f,C=!0,h=o,r=b,t(function(){C=!1,m[h].style[d+"transition"]="",m[h].style[d+"transform-origin"]="",m[h].style[d+"transform"]="",m[h].style.zIndex=1,m[h].style[d+"transform"]=e+g*i+"px"+f,m[r].style[d+"transition"]="",m[r].style.zIndex=0,a.onchange.call(m,h,r)},a.duration),a.infinite?(o=b,q=o-1,p=o+1,0>q&&(q=n-1),p>n-1&&(p=0)):(o=b,q=o-1,p=o+1))},L}};c.exports=function(a){if(e(this))a.container=this,f(a);else if("[object Array]"==Object.prototype.toString.call(this))for(var b=0,c=this.length;c>b;++c)a.container=this[b],e(this[b])&&f(a);else f(a)},window.$&&($.cardSlider=$.fn.cardSlider=c.exports)});
$.cardSlider(
    {
        container:document.getElementById("wrap"),
        direction:'Y',
        scale:true,
        offset:50,
        duration:300,
        infinite:true,
        onchange:function(o,i){
            console.log(o,i);
        }
    }
);
</script>
</html>